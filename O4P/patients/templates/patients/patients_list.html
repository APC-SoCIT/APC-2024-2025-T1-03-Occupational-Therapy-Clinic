{% extends "dashboard_navbar.html" %}

{% block content %}
<div class="main">
    <div class="container">
        <h1 class="my-5 fw-bold">Patient List:</h1>
        
        <button id="toggleView" class="toggle-button btn btn-primary mb-4">Add Patient</button>
        
        <div id="tableView" class="view">
            <h2>Patient Information</h2>
            <table id="patientTable" class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>
                            Name <br>
                            <input type="text" id="filterName" placeholder="Filter by Name" class="form-control">
                        </th>
                        <th>
                            Date of Birth <br>
                            <input type="date" id="filterDob" class="form-control">
                        </th>
                        <th>
                            Gender <br>
                            <select id="filterGender" class="form-select">
                                <option value="">All</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </th>
                        <th>
                            Contact Number <br>
                            <input type="text" id="filterPhysician" placeholder="Filter by Contact" class="form-control">
                        </th>
                        <th>
                            Diagnosis <br>
                            <input type="text" id="filterHistory" placeholder="Filter by Diagnosis" class="form-control">
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for patient in patients %}
                        <tr>
                            <td>{{ patient.id }}</td>
                            <td>
                                <a href="{% url 'patients.details' pk=patient.id %}" class="text-blue text-decoration-none">
                                    {{ patient.first_name }} {{ patient.last_name }}
                                </a>
                            </td>
                            <td>{{ patient.date_of_birth }}</td>
                            <td>{{ patient.gender }}</td>
                            <td>{{ patient.contact_number }}</td>
                            <td>{{ patient.diagnosis }}</td>
                        </tr>
                    {% endfor %}
                    
                    {% if not patients %}
                        <tr>
                            <td colspan="6">
                                <p>No patients available.</p> Â 
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <div class="d-flex justify-content-between">
            <a href="{% url 'welcome' %}" class="btn btn-secondary my-5">Back</a>
            {% if is_therapist or is_administrator %}
                <a href="{% url 'account_signup' %}" class="btn btn-secondary my-5">Create Patient Account</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}